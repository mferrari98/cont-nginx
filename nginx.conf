# ==========================================================
#  CONFIGURACIÓN NGINX PARA RED LOCAL - VERSIÓN DOCKER
# ==========================================================

# NOTA: Esta configuración se incluirá dentro del bloque http de nginx
# Las directivas como limit_req_zone deben estar aquí

# ------------------------------------------------------
#  Rate Limiting (protección contra abusos)
# ------------------------------------------------------
limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;
limit_req_zone $binary_remote_addr zone=api:10m rate=30r/s;

# ------------------------------------------------------
#  UPGRADE WEBSOCKETS
# ------------------------------------------------------
map $http_upgrade $connection_upgrade {
    default upgrade;
    ''      close;
}